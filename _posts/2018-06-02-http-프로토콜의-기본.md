---
title: "HTTP 프로토콜의 기본"
date: "2018-06-02 23:26"
categories:
    - Web Protocol
tags:
    - HTTP
    - form
    - MIME
    - Request
    - Response
    - Header
    - Body
    - AJAX
    - GET
    - POST
    - Routing
---

### Request 헤더
Address, Port, Path, QueryString 등의 정보가 들어있음, 바디가 있는경우 Content-Type. 쿠키, 클라이언트 정보

#### Content-Type
폼 데이터 : application/x-www-form-urlencoded
바이너리파일 : multipart/form-data

### Request 바디
Form Data, 첨부파일 등이 들어있음

### Response 헤더
응답상태(404 등), Content-Type, Set-Cookie, Location(3xx 리다이렉션 시)

### Response 바디
바디가 있을경우 헤더의 Content-Type에 따라 text/html일 경우 HTML을 렌더링하고, image/jpeg인 경우에는 그림을 띄움. JSON은 application/json

아, 서버에서 Content-Type을 세팅해준 이유가 있는 것이구나!!!!

### Request Method
종류  |  설명
--|--
 GET |  주어진 URL에서 자원을 요청
 POST |  주어진 URL로 자원의 생성을 요청
 PUT |  주어진 URL로 자원의 대체를 요청
 DELETE |  주어진 URL로 자원의 삭제를 요청
 HEAD |  주어진 URL에서 자원의 헤더만을 요청
 OPTIONS |  주어진 URL에서 처리 가능한 메소드의 목록을 요청

메소드가 여러개 존재하는 이유는, 동일한 URL에 다양한 요청과 응답을 구성하기 위해서이다. 이를 활용하는 것은 개발자에게 달려있다.

### MIME (Multipurpose Internet Mail Extensions)
메시지 컨텐트 형식을 정의하기 위한 인터넷 표준. 홈페이지 상에 표현되는 멀티미디어 데이터에 대한 형식

#### 주요 MIME 타입
타입  |  설명
--|--
text/plain  |  텍스트 파일
text/css  |  CSS 텍스트
text/html  |  HTML 텍스트
image/jpeg  |  JPG 이미지
image/gif  |  GIF 이미지
image/png  |  PNG 이미지
image/x-icon  |  ICO 이미지
video/mpeg  |  MPG 비디오
audio/ogg  |  OGG 오디오
application/javascript  |  JavaScript 텍스트
application/json  |  JSON 텍스트
application/pdf  |  PDF 파일
application/octet-stream  |  알려지지 않은 파일, 기타 바이너리

### 폼을 통한 요청
```<form action="Server URL" method="HTTP method" enctype="Body Content-Type">
```


method 속성에 명시된 HTTP 메소드로, action 속성에 명시된 URL로 Request를 보내며, 폼안에 있는 태그에 있는 값들이 enctype 속성을 기반으로 인코딩 되어 전송된다.


### GET vs POST in Form

#### GET
폼 데이터 들이 queryString 형태로 URL 뒷부분에 붙는다. Body에는 아무것도 없으며, 따라서 enctype이 무시가 된다. 아니 GET 메소드는 enctype이 필요가 없어서이다. enctype이 무시되기 때문에 파일첨부시 파일명만 전송된다.

#### POST
폼 데이터가 Body에 첨부된다. 이 때부터 enctype이 필요하게 된다. 따라서 enctype이 기본형인 application/x-www-form-urlencoded를 따르게 된다. urlencoded 방식의 폼데이터는 querystring의 형태와 비슷하다. 그러나 여전히 파일을 위한 인코딩이 아니므로 파일명만 전송된다.

enctype을 multipart/form-date로 명시할 경우 파일의 내용이 모두 인코딩되어 전송된다. 폼 데이터의 내용은 전송된다.

enctype을 text/plain으로 명시할 경우 파일명만 전송되며, 이는 디버깅 용도로 쓰인다.

폼 전송 방식의 선택기준 3가지는 method="GET", method="POST", method="POST" enctype="multipart/form-data" 이다. 말 안해도 이제 알 것이라고 생각한다.


### 다양한 태그를 통한 요청
브라우저가 최초의 HTML문서를 전송받고 이를 해석하는 도중에 link, script, iframe, img, video 태그에서 다른 URL의 자원을 참조하는 태그를 만날 경우에 새로운 HTTP Request를 보내게 된다.

### JavaScript를 통한 요청
AJAX(Asynchronous JavaScript ans XML)은 페이지 이동 없이, JavaScript를 이용해 동적으로 HTTP Request를 보내는 기술이다. 링크나 폼을 통해 Request를 보낼 경우에는 Response를 받으며 페이지를 전환하게 되지만, JavaScript를 이용하면 페이지 전환 없이 데이터를 요청하고 응답 받을 수 있다.

### 라우팅이란
Request Method와 URL을 기반으로 코드를 분기하는 것.
웹 브라우저에서 메인 페이지를 요청하면, 서버에서는 메인 페이지를 응답하는 코드가 실행되어야 하고, 게시판에 글쓰기를 요청하면 게시판 글을 저장하고 또 저장 완료를 응답하는 코드가 실행되어야 함.

일반적으로 웹서버는 Request URL에서 host와 querystring을 제외한 URL path와 Method를 기반으로 라우팅한다.
